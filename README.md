# MGL Notes App

A modern Mongolian notes application built with ClojureDart and Flutter. It offers multi-block editing, tags and search, recycle bin, import/export, and built-in Mongolian fonts and input.

## ğŸ†• Recent Changes

- **Utils module**: Added a new `utils/` directory with helper functions for clipboard, date, file, navigator, note, state, string, tag, and toast operations.
- **New screens**: Added `about_app.cljd` and `help_support.cljd` screens for app information and user support.
- **New widget**: Added `mgl_chip.cljd` component for tag and filter display.
- **Local dependency**: `mongol-block-editor`
- **Editor upgrade**: Multi-block editing is powered by `amjil/mongol-block-editor` for better stability and maintainability.
- **Auth basics**: Added login / registration and simple authentication flow (see `src/notes_app/screens/login.cljd` and `register.cljd`).
- **Scope consolidation**: Removed the previous calendar/statistics modules and their links. The current focus is core notes, search, tags, recycle bin, and import/export.

## ğŸš€ Features

- **Multi-block editor**: Smooth writing and reordering with Mongolian vertical input and fonts.
- **Tags and search**: Quickly find notes by tags and keywords.
- **Recycle bin**: Soft delete and restore to recover accidentally deleted notes.
- **Import/Export**: Use bundled datasets and import/export to back up or migrate data.
- **Mongolian input & fonts**: Custom virtual keyboard and bundled fonts.
- **Basic account screens**: Login/registration, About, and Help pages.

## ğŸ›  Tech Stack

- **ClojureDart**: Main business logic written in ClojureDart, output to `lib/cljd-out/`.
- **Flutter**: Crossâ€‘platform UI.
- **Mongol**: Mongolian components and input handling.
- **Drift**: Local database persistence (`lib/database/`).
- **Shared Preferences**: Local preferences storage.
- **Electric Sync (optional)**: `amjil/electric-sync` as a foundation for sync if needed.

## ğŸ“¦ Dependencies (aligned with the project)

### Dart/Flutter (excerpt)
- `mongol`: ^9.0.0
- `mongol_code`: ^0.3.0
- `flutter_dotenv`: ^5.2.1
- `shared_preferences`: ^2.5.3
- `lifecycle`: ^0.10.0
- `uuid`: ^4.5.1
- `vibration`: ^3.1.3
- `device_info_plus`: ^11.4.0
- `package_info_plus`: ^8.3.0
- `flutter_slidable`: ^4.0.0
- `flutter_styled_toast`: ^2.2.1
- `http`: ^1.4.0
- `path_provider`: ^2.1.4
- `drift`: ^2.27.0
- `sqlite3_flutter_libs`: ^0.5.34
- `path`: ^1.9.0
- `archive`: ^4.0.7

### ClojureDart (`deps.edn`)
- `tensegritics/clojuredart`
- `amjil/mongol-virtual-keyboard`
- `amjil/electric-sync`
- `amjil/mongol-block-editor`

## ğŸš€ Getting Started

### Prerequisites

1. **Dart SDK** â‰¥ 3.8.1 (see `environment.sdk` in `pubspec.yaml`)
2. **Flutter** (stable channel)
3. **ClojureDart** (see `https://github.com/Tensegritics/ClojureDart`)

### Install & Run

1. Clone this repository and enter the directory
2. Install Flutter dependencies
   ```bash
   flutter pub get
   ```
3. Build ClojureDart sources (outputs to `lib/cljd-out/`)
   ```bash
   clojure -M:cljd
   ```
4. Run the app
   ```bash
   flutter run
   ```

### Common commands

```bash
flutter run
flutter build apk
flutter build ios
flutter build web
flutter test
flutter analyze
```

## ğŸ“ Project Structure (simplified)

```
mgl-notes-app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart
â”‚   â”œâ”€â”€ cljd-out/                 # Generated by `clojure -M:cljd`
â”‚   â””â”€â”€ database/
â”‚       â”œâ”€â”€ database.dart
â”‚       â”œâ”€â”€ database.g.dart
â”‚       â””â”€â”€ connection/
â”œâ”€â”€ src/notes_app/
â”‚   â”œâ”€â”€ main.cljd
â”‚   â”œâ”€â”€ theme.cljd
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ home.cljd
â”‚   â”‚   â”œâ”€â”€ editor.cljd
â”‚   â”‚   â”œâ”€â”€ recycle.cljd
â”‚   â”‚   â”œâ”€â”€ search.cljd
â”‚   â”‚   â”œâ”€â”€ import_export.cljd
â”‚   â”‚   â”œâ”€â”€ login.cljd
â”‚   â”‚   â”œâ”€â”€ register.cljd
â”‚   â”‚   â”œâ”€â”€ about_app.cljd
â”‚   â”‚   â””â”€â”€ help_support.cljd
â”‚   â”œâ”€â”€ widgets/
â”‚   â”‚   â”œâ”€â”€ mgl_app_bar.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_chip.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_drawer.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_empty_state.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_favorite_list.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_filter_badge.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_import_export.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_infinite_scroll.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_keyboard.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_loading_state.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_note_item.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_notes_list.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_popup_menu.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_recycle_bin.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_search_panel.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_setting.cljd
â”‚   â”‚   â”œâ”€â”€ mgl_suggestion_panel.cljd
â”‚   â”‚   â””â”€â”€ mgl_text_input.cljd
â”‚   â”œâ”€â”€ states/
â”‚   â”‚   â”œâ”€â”€ blocks.cljd
â”‚   â”‚   â”œâ”€â”€ notes.cljd
â”‚   â”‚   â”œâ”€â”€ search.cljd
â”‚   â”‚   â”œâ”€â”€ tags.cljd
â”‚   â”‚   â””â”€â”€ ui.cljd
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ auth.cljd
â”‚   â”‚   â”œâ”€â”€ common.cljd
â”‚   â”‚   â”œâ”€â”€ db.cljd
â”‚   â”‚   â”œâ”€â”€ env.cljd
â”‚   â”‚   â”œâ”€â”€ import_export.cljd
â”‚   â”‚   â””â”€â”€ pref.cljd
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ clipboard.cljd
â”‚       â”œâ”€â”€ date.cljd
â”‚       â”œâ”€â”€ file.cljd
â”‚       â”œâ”€â”€ navigator.cljd
â”‚       â”œâ”€â”€ note.cljd
â”‚       â”œâ”€â”€ state_helpers.cljd
â”‚       â”œâ”€â”€ string.cljd
â”‚       â”œâ”€â”€ tag.cljd
â”‚       â””â”€â”€ toast.cljd
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ fonts/
â”‚   â”‚   â”œâ”€â”€ OyunQaganTig.ttf
â”‚   â”‚   â””â”€â”€ OnonSoninSans.ttf
â”‚   â”œâ”€â”€ data.zip
â”‚   â””â”€â”€ next.zip
â”œâ”€â”€ pubspec.yaml
â”œâ”€â”€ deps.edn
â””â”€â”€ README.md
```

## ğŸ¯ Usage (short)

- Create notes: tap â€œ+â€ on Home.
- Edit & reorder: add/remove blocks in the editor, long-press to reorder.
- Tags/Search: filter in the search and tags panels.
- Recycle bin: restore or permanently delete from the recycle page.
- Import/Export: operate data packages in Settings / Import-Export.

## ğŸ”§ Development

- Business logic primarily lives in `src/notes_app/` under `states/` and `services/`.
- Utility functions are organized in `src/notes_app/utils/` for reusable helpers.
- Data access is centralized in `lib/database/` (Drift).
- Build flow: run `clojure -M:cljd` first, then `flutter run`.

## ğŸ§ª Testing

```bash
flutter test
```

## ğŸ“± Production Builds

```bash
flutter build apk --release
flutter build appbundle --release
flutter build ios --release
flutter build web --release
```

## ğŸ¤ Contributing

1. Fork this repo
2. Create a branch (`git checkout -b feature/your-feature`)
3. Commit (`git commit -m 'feat: your feature'`)
4. Push and open a PR

### Code Style

- Follow ClojureDart and Flutter community conventions
- Semantic naming; comment non-obvious logic
- Add tests for new features

## ğŸ“„ License

MIT (see [LICENSE](LICENSE))

## ğŸ™ Acknowledgments

- ClojureDart and Flutter communities
- Maintainers of Mongol-related components

---

Built for Mongolian users â¤ï¸
